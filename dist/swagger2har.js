!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.swagger2har=t()}(this,function(){"use strict";var e,t=(function(e){var t={string:"",number:0,integer:0,null:null,boolean:!1,object:{}};function r(e,t,r){return!r.requiredPropertiesOnly||r.requiredPropertiesOnly&&function(e,t){var r=!1;return(t=t||[]).forEach(function(t){t===e&&(r=!0)}),r}(e,t.required)}function i(e){return function(e){return Array.isArray(e)}(e.type)&&(e.type=e.type[0]),e.type}e.exports={instantiate:function(e,n){n=n||{};var a={};return function e(a,s,o){if(a){var u,p,f=i(a);if("object"===f&&a.properties)for(var c in o[s]=o[s]||{},a.properties)a.properties.hasOwnProperty(c)&&r(c,a,n)&&e(a.properties[c],c,o[s]);else if(a.allOf)for(u=0;u<a.allOf.length;u++)e(a.allOf[u],s,o);else if("array"===f){o[s]=[];var v=0;for((a.minItems||a.minItems>0)&&(v=a.minItems),u=0;u<v;u++)e(a.items,u,o[s])}else!function(e){return"[object Array]"===Object.prototype.toString.call(e.enum)}(a)?function(e){var r=e.type;return void 0!==t[r]}(a)&&(o[s]=function(e){var r=e.type;return e.default?e.default:t[r]}(a)):o[s]=(p=a).default?p.default:p.enum.length?p.enum[0]:void 0}}(e,"kek",a),a.kek}}}(e={exports:{}},e.exports),e.exports),r=(t.instantiate,t),i=function(e,t,i){if(void 0!==e.paths[t][i].parameters)for(var a in e.paths[t][i].parameters){var s=e.paths[t][i].parameters[a];if(void 0!==s.in&&"body"===s.in.toLowerCase()&&void 0!==s.schema){var o;if(void 0===s.schema.$ref)o=s.schema;else if(/^http/.test(s.schema.$ref));else{var u=s.schema.$ref.split("/").slice(-1)[0];o=n(e,e.definitions[u])}return{mimeType:"application/json",text:JSON.stringify(r.instantiate(o))}}}return null},n=function e(t,r){if("object"===r.type){if(void 0!==r.properties)for(var i in r.properties){var n=r.properties[i];if("string"==typeof n.$ref&&!/^http/.test(n.$ref)){var a=n.$ref.split("/").slice(-1)[0];r.properties[i]=t.definitions[a]}e(t,r.properties[i])}}else if("array"===r.type&&void 0!==r.items)for(var s in r.items){if("$ref"===s&&!/^http/.test(r.items[s])){var o=r.items.$ref.split("/").slice(-1)[0];r.items=t.definitions[o]}e(t,r.items)}return r},a=function(e){var t="";return void 0!==e.schemes?t+=e.schemes[0]:t+="http","/"===e.basePath?t+="://"+e.host:t+="://"+e.host+e.basePath,t},s=function(e,t,r,i){void 0===i&&(i={});var n=[];if(void 0!==e.paths[t][r].parameters)for(var a in e.paths[t][r].parameters){var s=e.paths[t][r].parameters[a];"string"!=typeof s.$ref||/^http/.test(s.$ref)||(s=u(e,s.$ref)),void 0!==s.in&&"query"===s.in.toLowerCase()&&n.push({name:s.name,value:void 0===i[s.name]?void 0===s.default?"<SOME_"+s.type.toUpperCase()+"_VALUE>":s.default+"":i[s.name]+""})}return n},o=function(e,t,r){var i,n,a,s=[],o=e.paths[t][r];if(void 0!==o.consumes)for(var u in o.consumes){var p=o.consumes[u];s.push({name:"accept",value:p})}if(void 0!==o.produces)for(var f in o.produces){var c=o.produces[f];s.push({name:"content-type",value:c})}if(void 0!==o.parameters)for(var v in o.parameters){var h=o.parameters[v];void 0!==h.in&&"header"===h.in.toLowerCase()&&s.push({name:h.name,value:"<SOME_"+h.type.toUpperCase()+"_VALUE>"})}if(void 0!==o.security)for(var l in o.security){var m=Object.keys(o.security[l])[0];switch(e.securityDefinitions[m].type.toLowerCase()){case"basic":i=m;break;case"apikey":"query"===e.securityDefinitions[m].in&&(n=m);break;case"oauth2":a=m}}else if(void 0!==e.security)for(var d in e.security){var y=Object.keys(e.security[d])[0];switch(e.securityDefinitions[y].type.toLowerCase()){case"basic":i=y;break;case"apikey":"query"===e.securityDefinitions[y].in&&(n=y);break;case"oauth2":a=y}}return i?s.push({name:"Authorization",value:"Basic <USERNAME:PASSWORD>"}):n?s.push({name:e.securityDefinitions[n].name,value:"REPLACE_KEY_VALUE"}):a&&s.push({name:"Authorization",value:"Bearer <BEARER_TOKEN>"}),s},u=function(e,t){var r=t.split("/");if(r.length<=1)return{};return function e(t,i){if(i+1<r.length){var n=i+1;return e(t[r[i]],n)}return t[r[i]]}(e,1)};return function(e){try{var t=a(e),r=[];return Object.keys(e.paths).forEach(function(n){Object.keys(e.paths[n]).forEach(function(u){var p=t+n,f=function(e,t,r,n){void 0===n&&(n={});var u=a(e),p={method:r.toUpperCase(),url:u+t,headers:o(e,t,r),queryString:s(e,t,r,n),httpVersion:"HTTP/1.1",cookies:[],headersSize:0,bodySize:0},f=i(e,t,r);return f&&(p.postData=f),p}(e,n,u);r.push({path:n,method:u.toUpperCase(),url:p,description:e.paths[n][u].description||"No description available",har:f})})}),r}catch(e){return console.error(e),null}}});
