!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.swagger2har={})}(this,function(e){"use strict";var r,t=(function(e){var r={string:"",number:0,integer:0,null:null,boolean:!1,object:{}};function t(e,r,t){return!t.requiredPropertiesOnly||t.requiredPropertiesOnly&&function(e,r){var t=!1;return(r=r||[]).forEach(function(r){r===e&&(t=!0)}),t}(e,r.required)}function i(e){return function(e){return Array.isArray(e)}(e.type)&&(e.type=e.type[0]),e.type}e.exports={instantiate:function(e,a){a=a||{};var n={};return function e(n,s,o){if(n){var u,p,f=i(n);if("object"===f&&n.properties)for(var c in o[s]=o[s]||{},n.properties)n.properties.hasOwnProperty(c)&&t(c,n,a)&&e(n.properties[c],c,o[s]);else if(n.allOf)for(u=0;u<n.allOf.length;u++)e(n.allOf[u],s,o);else if("array"===f){o[s]=[];var v=0;for((n.minItems||n.minItems>0)&&(v=n.minItems),u=0;u<v;u++)e(n.items,u,o[s])}else!function(e){return"[object Array]"===Object.prototype.toString.call(e.enum)}(n)?function(e){var t=e.type;return void 0!==r[t]}(n)&&(o[s]=function(e){var t=e.type;return e.default?e.default:r[t]}(n)):o[s]=(p=n).default?p.default:p.enum.length?p.enum[0]:void 0}}(e,"kek",n),n.kek}}}(r={exports:{}},r.exports),r.exports),i=(t.instantiate,t),a=function(e,r,t){if(void 0!==e.paths[r][t].parameters)for(var a in e.paths[r][t].parameters){var s=e.paths[r][t].parameters[a];if(void 0!==s.in&&"body"===s.in.toLowerCase()&&void 0!==s.schema){var o;if(void 0===s.schema.$ref)o=s.schema;else if(/^http/.test(s.schema.$ref));else{var u=s.schema.$ref.split("/").slice(-1)[0];o=n(e,e.definitions[u])}return{mimeType:"application/json",text:JSON.stringify(i.instantiate(o))}}}return null},n=function(e,r){if("object"===r.type){if(void 0!==r.properties)for(var t in r.properties){var i=r.properties[t];if("string"==typeof i.$ref&&!/^http/.test(i.$ref)){var a=i.$ref.split("/").slice(-1)[0];r.properties[t]=e.definitions[a]}n(e,r.properties[t])}}else if("array"===r.type&&void 0!==r.items)for(var s in r.items){if("$ref"===s&&!/^http/.test(r.items[s])){var o=r.items.$ref.split("/").slice(-1)[0];r.items=e.definitions[o]}n(e,r.items)}return r},s=function(e){var r="";return void 0!==e.schemes?r+=e.schemes[0]:r+="http","/"===e.basePath?r+="://"+e.host:r+="://"+e.host+e.basePath,r},o=function(e,r,t,i){void 0===i&&(i={});var a=[];if(void 0!==e.paths[r][t].parameters)for(var n in e.paths[r][t].parameters){var s=e.paths[r][t].parameters[n];"string"!=typeof s.$ref||/^http/.test(s.$ref)||(s=p(e,s.$ref)),void 0!==s.in&&"query"===s.in.toLowerCase()&&a.push({name:s.name,value:void 0===i[s.name]?void 0===s.default?"<SOME_"+s.type.toUpperCase()+"_VALUE>":s.default+"":i[s.name]+""})}return a},u=function(e,r,t){var i,a,n,s=[],o=e.paths[r][t];if(void 0!==o.consumes)for(var u in o.consumes){var p=o.consumes[u];s.push({name:"accept",value:p})}if(void 0!==o.produces)for(var f in o.produces){var c=o.produces[f];s.push({name:"content-type",value:c})}if(void 0!==o.parameters)for(var v in o.parameters){var l=o.parameters[v];void 0!==l.in&&"header"===l.in.toLowerCase()&&s.push({name:l.name,value:"<SOME_"+l.type.toUpperCase()+"_VALUE>"})}if(void 0!==o.security)for(var h in o.security){var d=Object.keys(o.security[h])[0];switch(e.securityDefinitions[d].type.toLowerCase()){case"basic":i=d;break;case"apikey":"query"===e.securityDefinitions[d].in&&(a=d);break;case"oauth2":n=d}}else if(void 0!==e.security)for(var m in e.security){var y=Object.keys(e.security[m])[0];switch(e.securityDefinitions[y].type.toLowerCase()){case"basic":i=y;break;case"apikey":"query"===e.securityDefinitions[y].in&&(a=y);break;case"oauth2":n=y}}return i?s.push({name:"Authorization",value:"Basic <USERNAME:PASSWORD>"}):a?s.push({name:e.securityDefinitions[a].name,value:"REPLACE_KEY_VALUE"}):n&&s.push({name:"Authorization",value:"Bearer <BEARER_TOKEN>"}),s},p=function(e,r){var t=r.split("/");if(t.length<=1)return{};var i=function(e,r){if(r+1<t.length){var a=r+1;return i(e[t[r]],a)}return e[t[r]]};return i(e,1)},f={swagger2har:function(e){try{var r=s(e),t=[];return Object.keys(e.paths).forEach(i=>{Object.keys(e.paths[i]).forEach(n=>{var p=r+i,f=function(e,r,t,i){void 0===i&&(i={});var n=s(e),p={method:t.toUpperCase(),url:n+r,headers:u(e,r,t),queryString:o(e,r,t,i),httpVersion:"HTTP/1.1",cookies:[],headersSize:0,bodySize:0},f=a(e,r,t);return f&&(p.postData=f),p}(e,i,n);t.push({method:n.toUpperCase(),url:p,description:e.paths[i][n].description||"No description available",har:f})})}),t}catch(e){return console.error(e),null}}};e.default=f,Object.defineProperty(e,"__esModule",{value:!0})});
